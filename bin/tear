#!/bin/sh

USAGE="
Usage: $0 [-p <DIR>][-i <DIR>] [DIR]
	install

inst=
totear=
profile=~/.profile
while test $# -gt 0; do
case "$1" in
	-i|--install)
		if test $# -lt 2; then
			TEARDIR=~/.tear
			mkdir -p $TEARDIR
		else
			TEARDIR="$2"
			shift
		fi
		export TEARDIR
		shift
		inst=1
		;;
	-p|--profile)
		if test $# -lt 2; then
			echo "missing value of $1 argument" >2
			exit 1
		fi
		profile=$2
		shift; shift
		;;
	*)
		totear=$1
		break
esac

if test -n "$inst"; then
	mkdir -p $TEARDIR
	TEARCONFIG="
## TEAR setup
TEARDIR=$TEARDIR
PATH=\$TEARDIR:\$PATH
RUBYLIB=\$TEARDIR/lib:\$RUBYLIB
export TEARDIR PATH RUBYLIB
## end TEAR setup
"
	echo $TEARCONFIG > $profile
	echo ". $profile"
	exit
fi


